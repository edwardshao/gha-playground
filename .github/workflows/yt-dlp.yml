name: YT-DLP Download

on:
    workflow_dispatch:
        inputs:
            dl_url:
                description: 'URL to download'
                required: true
                type: string

jobs:
    download:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout repository
              uses: actions/checkout@v4

            - name: Setup yt-dlp
              uses: AnimMouse/setup-yt-dlp@v3

            - name: Setup yt-dlp YouTube cookies
              uses: AnimMouse/setup-yt-dlp/cookies@v3
              with:
                cookies: ${{ secrets.YT_COOKIES }}

            - name: Download video
              run: |
                    yt-dlp ${{ inputs.dl_url }}
                    
            - name: List downloaded files
              run: |
                    echo "Downloaded files:"
                    ls -lh
                    echo "Download complete!"